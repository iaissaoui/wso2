<?xml version="1.0" encoding="UTF-8"?>
<api context="/api" name="api" xmlns="http://ws.apache.org/ns/synapse">
    <resource methods="GET" url-mapping="/hello">
        <inSequence>
            <log description="Start" level="custom" separator=" ### ">
                <property name="Started Service on GET" value="/hello"/>
            </log>
            <log description="Full" level="full" separator=" ### "/>
            <log description="End" level="custom" separator=" ### ">
                <property name="Ended Service" value="/hello"/>
            </log>
            <respond/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
    <resource methods="POST" url-mapping="/hello">
        <inSequence>
            <log description="Start" level="custom" separator="@@@">
                <property name="Started Service on POST" value="/hello"/>
            </log>
            <log description="Full" level="full"/>
            <log description="in-logs" level="custom">
                <property expression="json-eval($)" name="in-sequence"/>
            </log>
            <loopback/>
        </inSequence>
        <outSequence>
            <property expression="json-eval($.name)" name="name" scope="default" type="STRING"/>
            <log level="custom">
                <property expression="get-property('name')" name="prop 1"/>
            </log>
            <property expression="fn:concat('{&quot;message&quot; : &quot;Hello ' , get-property('name'), '!&quot;}' )" name="message" scope="default" type="STRING"/>
            <log level="custom">
                <property expression="get-property('message')" name="prop 2"/>
            </log>
            <enrich>
                <source clone="true" type="inline">{&#xd;
	"dummy": "dummy"&#xd;
}</source>
                <target action="child" xpath="json-eval($.)"/>
            </enrich>
            <enrich description="">
                <source clone="true" property="message" type="property"/>
                <target action="child" xpath="json-eval($.)"/>
            </enrich>
            <!--             <log description="out-logs" level="custom"> -->
            <!--                 <property expression="json-eval($)" name="out-sequence"/> -->
            <!--             </log> -->
            <respond/>
        </outSequence>
        <faultSequence/>
    </resource>
    <resource methods="POST" url-mapping="/nasdaq">
        <inSequence/>
        <outSequence/>
        <faultSequence/>
    </resource>
</api>
